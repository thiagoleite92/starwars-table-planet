(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(6),c=n.n(u),l=n(2),o=n(3),i=n(4),m=n.n(i),s=n(7),f=n(1),p=Object(a.createContext)(),E=(n(14),function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("h2",null,"Loading..."))}),d=function(e){var t=e.children,n=Object(a.useState)([]),u=Object(f.a)(n,2),c=u[0],i=u[1],d=Object(a.useState)([]),b=Object(f.a)(d,2),h=b[0],v=b[1],C=Object(a.useState)(!0),j=Object(f.a)(C,2),O=j[0],y=j[1],g=Object(a.useState)([]),k=Object(f.a)(g,2),S=k[0],F=k[1],x=Object(a.useState)(""),w=Object(f.a)(x,2),N=w[0],q=w[1],A=Object(a.useState)(["population","orbital_period","diameter","rotation_period","surface_water"]),D=Object(f.a)(A,2),H=D[0],L=D[1],I=Object(a.useState)({column:"population",comparison:"maior que",value:0,name:"Name",sort:"ASC"}),P=Object(f.a)(I,2),_=P[0],J=P[1];if(Object(a.useEffect)((function(){(function(){var e=Object(s.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://swapi-trybe.herokuapp.com/api/planets/");case 2:return e.next=4,e.sent.json();case 4:t=e.sent,(n=t.results).forEach((function(e){return delete e.residents})),i(n),y(!1),function(){var e=Object.keys(n[0]);v(e)}();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[O]),Object(a.useEffect)((function(){F(c.filter((function(e){return e.name.toLowerCase().includes(N.toLocaleLowerCase())})))}),[N,c]),Object(a.useEffect)((function(){var e=_.name;({ASC:function(){return F(c.sort((function(t,n){return t[e]-n[e]})))},DESC:function(){return F(c.sort((function(t,n){return t[e]+n[e]})))}})[_.sort]()}),[_,c]),O)return r.a.createElement(E,null);var T={filteredPlanets:S,colHeaders:h,setSearch:q,filterOptions:H,handleChange:function(e){var t=e.target,n=t.name,a="checkbox"===t.type?t.checked:t.value;J((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(l.a)({},n,a))}))},handleNumericFilters:function(){var e=_.column,t=_.comparison,n=_.value,a=function(t){return t[e]>parseInt(n,10)},r=function(t){return t[e]<parseInt(n,10)},u=function(t){return t[e]===n},l={"maior que":function(){return F(c.filter(a))},"menor que":function(){return F(c.filter(r))},"igual a":function(){return F(c.filter(u))}};return L(H.filter((function(t){return t!==e}))),l[t]()},clearFilters:function(){F(c)}};return r.a.createElement(p.Provider,{value:T},t)};n(15);function b(e,t){return r.a.createElement("th",{key:t},e)}var h=function(){return r.a.createElement(p.Consumer,null,(function(e){return e.colHeaders.map(b)}))};var v=function(){return r.a.createElement(p.Consumer,null,(function(e){return function(e,t){return e.map((function(e,n){return r.a.createElement("tr",{key:n},t.map((function(t){return r.a.createElement("td",{key:t},e[t])})))}))}(e.filteredPlanets,e.colHeaders)}))};var C=function(){return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement(h,null))),r.a.createElement("tbody",null,r.a.createElement(v,null)))};var j=function(){return r.a.createElement(p.Consumer,null,(function(e){return function(e){return r.a.createElement("label",{htmlFor:"planet"},"Filter planets by name",r.a.createElement("input",{"data-testid":"name-filter",name:"planet",type:"text",onChange:function(t){return e(t.target.value)}}))}(e.setSearch)}))};var O=function(){return r.a.createElement(p.Consumer,null,(function(e){return function(e,t,n){return r.a.createElement(r.a.Fragment,null,"Filter by numeric Values",r.a.createElement("label",{htmlFor:"column-filter"},r.a.createElement("select",{"data-testid":"column-filter",name:"column",onChange:e},n.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("label",{htmlFor:"comparison-filter"},r.a.createElement("select",{"data-testid":"comparison-filter",name:"comparison",onChange:e},["maior que","menor que","igual a"].map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("label",{htmlFor:"value-filter"},r.a.createElement("input",{type:"number","data-testid":"value-filter",name:"value",min:"0",onChange:e})),r.a.createElement("button",{type:"submit","data-testid":"button-filter",onClick:function(){return t()}},"Aplicar filtro"))}(e.handleChange,e.handleNumericFilters,e.filterOptions)}))},y=function(){return r.a.createElement(p.Consumer,null,(function(e){var t=e.clearFilters;return r.a.createElement("div",{"data-testid":"filter"},r.a.createElement("button",{type:"button",onClick:function(){return t()}},"X"))}))};var g=function(){return r.a.createElement(p.Consumer,null,(function(e){return function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{"data-testid":"column-sort",name:"name"},e.map((function(e,n){return r.a.createElement("option",{key:n,onChange:t},e)}))),r.a.createElement("input",{type:"radio","data-testid":"column-sort-input-asc",value:"ASC",name:"sort",checked:!0,onChange:t}),"ASCENDENTE",r.a.createElement("input",{type:"radio","data-testid":"column-sort-input-asc",value:"DESC",name:"sort",onChange:t}),"DESCENDENTE",r.a.createElement("button",{type:"button","data-testid":"column-sort-button"},"Ordenar"))}(e.colHeaders,e.handleChange)}))};var k=function(){return r.a.createElement(d,null,r.a.createElement(j,null),r.a.createElement(O,null),r.a.createElement(y,null),r.a.createElement(g,null),r.a.createElement(C,null))};c.a.render(r.a.createElement(k,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.e2b03680.chunk.js.map